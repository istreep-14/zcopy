<!DOCTYPE html>
<html>
<head>
  <style>
    body { 
      width: 300px; 
      padding: 20px; 
      font-family: Arial, sans-serif;
    }
    input { 
      width: 100%; 
      padding: 8px; 
      margin: 10px 0; 
    }
    button { 
      width: 100%; 
      padding: 10px; 
      background: #4285f4; 
      color: white; 
      border: none; 
      cursor: pointer; 
    }
    .status { 
      margin: 10px 0; 
      padding: 8px; 
      border-radius: 4px; 
    }
    .success { background: #d4edda; color: #155724; }
    .error { background: #f8d7da; color: #721c24; }
  </style>
</head>
<body>
  <h3>Zetamac Coach Setup</h3>
  
  <label>Apps Script URL:</label>
  <input type="text" id="url-input" placeholder="https://script.google.com/macros/s/.../exec">
  
  <button id="save-btn">Save URL</button>
  
  <div id="current-url" style="font-size: 12px; margin-top: 10px; color: #666;"></div>
  <div id="status"></div>

  <script>
    // Load current URL on startup
    chrome.storage.local.get(['apps_script_url'], (result) => {
      if (result.apps_script_url) {
        document.getElementById('url-input').value = result.apps_script_url;
        document.getElementById('current-url').textContent = 'Current: ' + result.apps_script_url;
      }
    });

    // Save URL
    document.getElementById('save-btn').addEventListener('click', () => {
      const url = document.getElementById('url-input').value.trim();
      const status = document.getElementById('status');
      
      if (!url) {
        status.className = 'status error';
        status.textContent = 'Please enter a URL';
        return;
      }
      
      if (!url.includes('script.google.com')) {
        status.className = 'status error';
        status.textContent = 'Please enter a valid Google Apps Script URL';
        return;
      }
      
      chrome.storage.local.set({ apps_script_url: url }, () => {
        status.className = 'status success';
        status.textContent = 'URL saved successfully!';
        document.getElementById('current-url').textContent = 'Current: ' + url;
        
        // Clear status after 3 seconds
        setTimeout(() => {
          status.textContent = '';
          status.className = '';
        }, 3000);
      });
    });
  </script>
</body>
</html>
